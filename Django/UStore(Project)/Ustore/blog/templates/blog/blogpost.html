{% extends 'blog/base.html' %}

{% block title %}UBlog - Blogpost{% endblock %}

{% block css %}
.onsides{
    display:flex;
    justify-content:space-between
}
{% endblock %}

{% block body %}
<div class="container">
    <div class="row mt-4">
        <div class="col-md-8 blog-main total_len" id='{{len_list}}'>
            <div class="mb-3 border-bottom">
                <h3 class="font-italic ">
                    {{post.title}}
                </h3>
                <p class="blog-post-meta">{{post.pub_date}} by <a href="#">{{post.author}}</a></p>
            </div>
            <div class="blog-post">
                <h2 class="blog-post-title">{{post.head0}}</h2>
                <p>{{post.content_head0}}</p>
                <h2>{{post.head1}}</h2>
                <p>{{post.content_head1}}</p>
                <h2>{{post.head2}}</h2>
                <p>{{post.content_head2}}</p>
            </div><!-- /.blog-post -->
            <!-- For the button to read previous and next blogpost -->
            <div class="onsides my-3">
                <button id='{{post.post_id}}' class='btn btn-success prevblog' >Previous</button>
                <button id='{{post.post_id}}' class='btn btn-success nextblog'>Next</button>
            </div>
        </div><!-- /.blog-main -->
        <aside class="col-md-4 blog-sidebar">
            <div class="p-4 mb-3 bg-light rounded">
                <h4 class="font-italic">About</h4>
                <p class="mb-0">UStore is an <em>ecommerce website</em>. You can use it for buying and
                    searching items online. </p>
            </div>
            <div class="p-4">
                <h4 class="font-italic">Contact Us On: </h4>
                <ol class="list-unstyled">
                    <li><a href="#">GitHub</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">Facebook</a></li>
                </ol>
            </div>
        </aside><!-- /.blog-sidebar -->
    </div>
</div>
{% endblock %}

{% block js %}
<script>
$('.total_len').click(function () {
    var len_list = parseInt(this.id)
})
// for previous button 
$('.prevblog').click(function (){
    var id = this.id - 1
    console.log(id)
    if (id != 2){
        document.location = `${id}`
    }
    else{
        document.location.reload()
    }
})
// for next button 
$('.nextblog').click(function (){
    var id = parseInt(this.id) + 1
    console.log(id)
    // The window. makes any local varible a global variable so we must always use window. when we want to access any local variable as shown below

    // The following is a very dirty fix to one of the problems which occurs
    if (id >= 6){
        document.location = window.reload()
    }
    else if (id >= 3) {
        document.location = `${id}`
    } 
    // Since the combination of the first if and the else is not working so we are doing it through the help of the abouve if statement.
    // else{
    //     document.location = document.reload()
    // }
})
</script>

{% endblock %}